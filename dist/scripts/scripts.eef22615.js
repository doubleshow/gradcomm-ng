"use strict";angular.module("myAppApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angularCharts"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/students.html",controller:"StudentsCtrl"}).when("/report",{templateUrl:"views/report.html",controller:"ReportCtrl"}).when("/stats",{templateUrl:"views/stats.html",controller:"StatsCtrl"}).otherwise({redirectTo:"/"})}]),function(){var a=function(b){function c(b){return arguments.length?(t=d(b),a):t}function d(a){return"function"==typeof a?a:function(){return a}}function e(b){return arguments.length?(u="number"==typeof b?function(a){return h(a,b)}:d(b),a):u}function f(b){return arguments.length?(f=!!b,a):f}function g(a,b){return h(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function h(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function i(a){return[q(a),r(a)]}var j=b.data,k=b.bins,l=k.length,m=function(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}},n=m(function(a){return a}),o=(n.left,n.right),p=o,q=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},r=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},f=!0,s=Number,t=i,u=g;e(k);for(var v,w,e=[],x=j.map(s,this),c=t.call(this,x,l),y=u.call(this,c,x,l),l=-1,z=x.length,A=y.length-1,B=f?1:1/z;++l<A;)v=e[l]=[],v.dx=y[l+1]-(v.x=y[l]),v.y=0;if(A>0)for(l=-1;++l<z;)w=x[l],w>=c[0]&&w<=c[1]&&(v=e[p(y,w,1,A)-1],v.y+=B,v.push(j[l]));return e};"undefined"!=typeof module&&module.exports&&(module.exports=a),"undefined"==typeof ender&&(this.histogram=a),"function"==typeof define&&define.amd&&define("histogram",[],function(){return a})}.call(this),angular.module("myAppApp").controller("StudentsCtrl",["$scope","$http","$filter",function(a,b,c){c("orderBy");b.get("data/data.json").success(function(b){a.students=b,a.students.forEach(function(a){a.name=a.info.name,a.advisor=a.phd.advisor})}),a.showMilestones=!0,a.showPublications=!1,a.showCourses=!1,a.showAwards=!1,a.toggleShowPublications=function(){a.showPublications=!a.showPublications},a.toggleShowCourses=function(){a.showCourses=!a.showCourses},a.toggleShowMilestones=function(){a.showMilestones=!a.showMilestones},a.toggleShowAwards=function(){a.showAwards=!a.showAwards},a.b=function(a){return a?"btn-info":""}}]),angular.module("myAppApp").controller("StatsCtrl",["$scope","$http",function(a,b){b.get("data/data.json").success(function(b){function c(){var a=b.map(function(a){return a.publications.length}),c=a.reduce(function(a,b){return a+b},0);console.log(c);var e=d(0,24,25),f=a,g=histogram({data:f,bins:e}),h={title:"Publications",tooltips:!0,labels:!1,mouseover:function(){},mouseout:function(){},click:function(){},legend:{display:!1,position:"left",htmlEnabled:!1},colors:[],innerRadius:0,lineLegend:"lineEnd",lineCurveType:"cardinal",isAnimate:!0,yAxisTickFormat:"s",xAxisMaxTicks:7};console.log(g.map(function(a){return{x:a.x,y:a.y}}));var i={series:["Publications"],data:g.map(function(a){return{x:a.x,y:[a.y],tooltip:""+a.y+" students have "+a.x+" publications"}})};return{config:h,data:i,total:c,num_students:a.length}}a.students=b;var d=function(a,b,c){if("undefined"==typeof c&&(c=Math.max(Math.round(b-a)+1,1)),2>c)return 1===c?[a]:[];var d,e=Array(c);for(c--,d=c;d>=0;d--)e[d]=(d*b+(c-d)*a)/c;return e};a.stats={},a.stats.pubs=c()})}]).controller("ReportCtrl",["$scope","$http","$filter",function(a,b,c){c("orderBy");b.get("data/data.json").success(function(b){a.students=b;var c=[];b.forEach(function(b){function d(a){return"Area Exam"===a?"btn-info":"Proposal Defense"===a?"btn-success":"Dissertation Defense"===a?"btn-danger":"btn-default"}var e=b.info.name+", "+b.phd.advisor+", ";c.push(e);var f=["2008","2009","2010","2011","2012","2013","2014","2015"];a.years=f;var g={};f.forEach(function(a){g[a]=""}),b.timeline=g,b.phd.milestones_completed=[],b.phd.milestones&&b.phd.milestones.forEach(function(a){a.completed.length>2&&(b.phd.milestones_completed.push(a.name),f.forEach(function(b){a.completed.search(b)>0&&(g[b]={name:a.name,klass:d(a.name)})}),b.timeline=g)})});var d="";c.forEach(function(a){d=d+a+"\n"}),a.csv=d})}]);